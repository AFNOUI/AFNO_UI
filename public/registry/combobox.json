{
  "name": "combobox",
  "dependencies": [
    "lucide-react"
  ],
  "devDependencies": [],
  "registryDependencies": [
    "utils",
    "command",
    "popover",
    "button"
  ],
  "files": [
    {
      "path": "components/ui/combobox.tsx",
      "type": "registry:component",
      "content": "\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Check, ChevronsUpDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nimport {\r\n    Command,\r\n    CommandItem,\r\n    CommandList,\r\n    CommandEmpty,\r\n    CommandGroup,\r\n    CommandInput,\r\n} from \"@/components/ui/command\"\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from \"@/components/ui/popover\"\r\nimport { Button } from \"@/components/ui/button\"\r\n\r\nconst ComboboxList = CommandList\r\nconst ComboboxEmpty = CommandEmpty\r\nconst ComboboxInput = CommandInput\r\nconst ComboboxGroup = CommandGroup\r\n\r\nconst ComboboxContext = React.createContext<{\r\n    open: boolean\r\n    value: string\r\n    setOpen: (open: boolean) => void\r\n    setValue: (value: string) => void\r\n} | null>(null)\r\n\r\nconst Combobox = ({\r\n    value,\r\n    children,\r\n    onValueChange\r\n}: {\r\n    value: string,\r\n    children: React.ReactNode,\r\n    onValueChange: (value: string) => void\r\n}) => {\r\n    const [open, setOpen] = React.useState(false)\r\n\r\n    return (\r\n        <ComboboxContext.Provider value={{ open, setOpen, value, setValue: onValueChange }}>\r\n            <Popover open={open} onOpenChange={setOpen}>\r\n                {children}\r\n            </Popover>\r\n        </ComboboxContext.Provider>\r\n    )\r\n}\r\n\r\nconst ComboboxTrigger = React.forwardRef<HTMLButtonElement, React.ComponentPropsWithoutRef<typeof Button>>(\r\n    ({ className, children, ...props }, ref) => {\r\n        const context = React.useContext(ComboboxContext)\r\n\r\n        if (!context) throw new Error(\"ComboboxTrigger must be used within a Combobox\")\r\n\r\n        return (\r\n            <PopoverTrigger asChild>\r\n                <Button\r\n                    ref={ref}\r\n                    variant=\"outline\"\r\n                    role=\"combobox\"\r\n                    aria-expanded={context.open}\r\n                    className={cn(\"w-[200px] justify-between\", className)}\r\n                    {...props}\r\n                >\r\n                    {children}\r\n                    <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n                </Button>\r\n            </PopoverTrigger>\r\n        )\r\n    }\r\n)\r\nComboboxTrigger.displayName = \"ComboboxTrigger\"\r\n\r\nconst ComboboxContent = ({ children, className }: { children: React.ReactNode, className?: string }) => (\r\n    <PopoverContent className={cn(\"w-[200px] p-0\", className)}>\r\n        <Command>{children}</Command>\r\n    </PopoverContent>\r\n)\r\n\r\nconst ComboboxItem = React.forwardRef<\r\n    React.ElementRef<typeof CommandItem>,\r\n    React.ComponentPropsWithoutRef<typeof CommandItem>\r\n>(({ className, children, value: itemValue, onSelect, ...props }, ref) => {\r\n    const context = React.useContext(ComboboxContext)\r\n\r\n    if (!context) throw new Error(\"ComboboxItem must be used within a Combobox\")\r\n\r\n    return (\r\n        <CommandItem\r\n            ref={ref}\r\n            value={itemValue}\r\n            className={cn(className)}\r\n            onSelect={(currentValue) => {\r\n                context?.setValue(currentValue === context.value ? \"\" : currentValue)\r\n                context?.setOpen(false)\r\n                onSelect?.(currentValue)\r\n            }}\r\n            {...props}\r\n        >\r\n            <Check\r\n                className={cn(\r\n                    \"mr-2 h-4 w-4\",\r\n                    context?.value === itemValue ? \"opacity-100\" : \"opacity-0\"\r\n                )}\r\n            />\r\n            {children}\r\n        </CommandItem>\r\n    )\r\n})\r\nComboboxItem.displayName = \"ComboboxItem\"\r\n\r\nexport {\r\n    Combobox,\r\n    ComboboxList,\r\n    ComboboxItem,\r\n    ComboboxInput,\r\n    ComboboxEmpty,\r\n    ComboboxGroup,\r\n    ComboboxTrigger,\r\n    ComboboxContent,\r\n}\r\n"
    }
  ]
}